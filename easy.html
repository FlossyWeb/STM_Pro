<!doctype html>
<html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="CONTENT-LANGUAGE" content="French">
    <title>DCVP by TaxiMedia</title>
    <link type="image/x-icon" href="visuels/favicon.ico" rel="icon"/>
    <link type="image/x-icon" href="visuels/favicon.ico" rel="shortcut icon"/>
    <link rel="apple-touch-icon" href="visuels/idev.favicon.png"/>
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1, minimum-scale=1, maximum-scale=1"/>
    <!-- <meta name="viewport" content="width=device-width, height=device-height, user-scalable=yes, initial-scale=1"/> -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <link rel="apple-touch-startup-image" href="visuels/startup_image.png" />
    <!-- iPhone -->
    <link rel="apple-touch-startup-image" media="(device-width: 320px)" href="visuels/startup_image.png">
    <!-- iPhone (Retina) -->
    <link rel="apple-touch-startup-image"
          media="(device-width: 320px)
             and (-webkit-device-pixel-ratio: 2)"
          href="visuels/startup_image_xl.png">
    <!-- iPhone 5 -->
    <link rel="apple-touch-startup-image"
            media="(device-width: 320px) and (device-height: 568px)
            and (-webkit-device-pixel-ratio: 2)"
            href="visuels/startup_image_i5.png">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.css" />
    <link type="text/css" rel="stylesheet" href="css/mobile.css" />
    <script type="text/javascript" src="https://maps.google.com/maps/api/js?sensor=false&libraries=places"></script>
    <!--
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
    -->
	<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
    <script src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
	<script type="text/javascript">
        $( document ).bind( "mobileinit", function() {
            // Make your jQuery Mobile framework configuration changes here!
			$.support.cors = true;
            $.mobile.allowCrossDomainPages = true;
			//$.mobile.selectmenu.prototype.options.nativeMenu = false;
        });
    </script>    
    <script src="http://code.jquery.com/mobile/1.4.2/jquery.mobile-1.4.2.min.js"></script>
    <script src="phonegap.js"></script>
    <script src="js/plugins/Calendar.js"></script>
    <script src="barcodescanner.js"></script>
    <script src="PushNotification.js"></script>
    <script src="GAPlugin.js"></script>
    <script src="cdv-plugin-fb-connect.js"></script>
    <script src="facebook-js-sdk.js"></script>
    <!-- 
    <script src="childbrowser.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.3.0/jquery.mobile-1.3.0.min.js"></script>
    <script type="text/javascript" src="js/marquee.js"></script>
    -->
    <script type="text/javascript" src="js/jquery.html5storage.min.js"></script>
    <script type="text/javascript" src="js/jquery.ui.autocomplete.min.js"></script>
    <script type="text/javascript" src="js/demo.js"></script>
    <script type="text/javascript" src="ui/jquery.ui.map.js"></script>
    <script type="text/javascript" src="ui/jquery.ui.map.services.js"></script>
    <script type="text/javascript" src="ui/jquery.ui.map.extensions.js"></script>
    <script type="text/javascript" src="js/jquery.validate.js"></script>
    <script type="text/javascript">

        $(document).ready(function(){

            $.validator.addMethod(
                "regex",
                function(value, element, regexp) {
                    var check = false;
                    var re = new RegExp(regexp);
                    return this.optional(element) || re.test(value);
                },""	  
            );
            
            $.validator.addMethod('phone', function (value) {
                return /^(01|02|03|04|05|06|07|08|09)[0-9]{8}$/.test(value);
            }, 'le N&deg; de t&eacute;l&eacute;phone et une s&eacute;rie de 10 chiffres sans espace commen&ccedil;ant par 0');
            
            $.validator.addMethod('siret', function (value) {
                return /^[0-9]{14}$/.test(value);
            }, 'Le N&deg; SIRET doit corresondre &agrave; 14 chiffres sans espace.');

            $("#modmy").validate({
                rules: {
                 login: {
                   required: true,
                   phone: true
                 },
                 nom: "required",
                 prenom: "required",
                 taxi: "required",
                 tel: {
                   required: true,
                   phone: true
                 },
                 siret: {
                   required: true,
                   siret: true
                 },
                 station: "required",
                 email: {
                   required: true,
                   email: true
                 },
                 confirmail: {
                   required: true,
                   email: true,
                   equalTo: '#email'
                 }
                },
                messages: {
                 nom: "Ce champs est obligatoire",
                 prenom: "Ce champs est obligatoire",
                 taxi: "Ce champs est obligatoire",
                 station: "Ce champs est obligatoire",
                 email: {
                   required: "Nous avons besoin de votre email afin de vous contacter",
                   email: "Votre email doit &ecirc;tre au format nom@domaine.com"
                 },
                 confirmail: {
                   required: "L&rsquo;email ci dessus n&rsquo;a pas &eacute;t&eacute; confirm&eacute;",
                   email: "Votre email doit &ecirc;tre au format nom@domaine.com",
                   equalTo: "Cette adresse n&rsquo;est pas identique &agrave; la pr&eacute;c&eacute;dante."
                 }
                }
                /* Put errors below fields
                ,
                errorPlacement: function(error, element) {
                    error.appendTo( element.parent().next('em') );
                }
                */
            });
			$("#modmy").submit(function(event) {
				if ($("#modmy").valid())
				{	
					// stop form from submitting normally
					event.preventDefault();
					// Subs some data
					$.post("https://ssl14.ovh.net/~taxibleu/client/login_app.php", $("#modmy").serialize(), function(data) {
						// GET SHIT BACK !!
						$.localStorage.setItem('civil', data.civil);
						$.localStorage.setItem('nom', data.nom);
						$.localStorage.setItem('prenom', data.prenom);
						$.localStorage.setItem('taxi', data.taxi);
						$.localStorage.setItem('tel', data.tel);
						$.localStorage.setItem('siret', data.siret);
						$.localStorage.setItem('email', data.email);
						$.localStorage.setItem('station', data.station);
						$.sessionStorage.setItem('pwd', data.pwd);
						$.sessionStorage.setItem('modmy', data.modmy);
						//alert(data.taxi + ' - ' + data.siret + ' - ' + data.email + ' - ' + data.tel + ' - ' + data.subscribed + ' - ' + data.telexist + ' - ' + data.cabexist + ' - ' + data.sirexist);
						
						var display = '';
						if (data.modmy)
						{
							display = '<p><b>la modification de vos informations personnelles &agrave; bien &eacute;t&eacute; prise en compte, merci.</b></p>';
						}
						else {
							display = '<p style="color:red;"><b>la modification de vos informations personnelles n&rsquo;&agrave; pas &eacute;t&eacute; prise en compte, l&rsquo;identifiant fourni ne figurant pas dans notre base de donn&eacute;e.</b></p>';
						}
						$('#mod_collaps').collapsible( "collapse" );
						$("#returns").empty().append(display);
					}, "json");
				}
			});
			$("#change").submit(function(event) {
				// stop form from submitting normally
				event.preventDefault();
				// Subs some data
				$.post("https://ssl14.ovh.net/~taxibleu/client/login_app.php", $("#change").serialize(), function(data) {
					//alert($("#change").serialize());
					// GET SHIT BACK !!
					var display = '';
					if (data.changed)
					{
						display = '<p><b>Voici les informations d&rsquo;identification qui vous permettront d&rsquo;acc&egrave;der &agrave; votre compte :<br><span style="color:#09F;">Identifiant = ' + data.tel + '<br>Mot de passe = ' + data.pwd + '</span><br>Vous les recevrez dans quelques instants &agrave; cet email : <span style="color:#09F;">' + data.email + '</span>, merci.<br></b></p>';
					}
					else {
						display = '<p style="color:red;"><b>la modification de vos informations personnelles n&rsquo;&agrave; pas &eacute;t&eacute; prise en compte, l&rsquo;identifiant fourni ne figurant pas dans notre base de donn&eacute;e.</b></p>';
					}
					$("#returns").empty().append(display);
				}, "json");
			});
        });
    </script>
	<style type="text/css">
        label.error { float: none; color: red; padding-left: .5em; vertical-align: top; }
    </style>
	<script type="text/javascript">		
		/*
		navigator.geolocation.getAccurateCurrentPosition = function (geolocationSuccess, geolocationError, geoprogress, options) {
			var lastCheckedPosition;
			var locationEventCount = 0;
			
			options = options || {};
		
			var checkLocation = function (position) {
				lastCheckedPosition = position;
				++locationEventCount;
				// We ignore the first event unless it's the only one received because some devices seem to send a cached
				// location even when maxaimumAge is set to zero
				if ((position.coords.accuracy <= options.desiredAccuracy) && (locationEventCount > 0)) {
					clearTimeout(timerID);
					navigator.geolocation.clearWatch(watchID);
					foundPosition(position);
				} else {
					geoprogress(position);
				}
			}
		
			var stopTrying = function () {
				navigator.geolocation.clearWatch(watchID);
				foundPosition(lastCheckedPosition);
			}
		
			var onError = function (error) {
				clearTimeout(timerID);
				navigator.geolocation.clearWatch(watchID);
				geolocationError(error);
			}
		
			var foundPosition = function (position) {
				geolocationSuccess(position);
			}
		
			if (!options.maxWait) options.maxWait = 10000; // Default 10 seconds
			if (!options.desiredAccuracy) options.desiredAccuracy = 20; // Default 20 meters
			if (!options.timeout) options.timeout = options.maxWait; // Default to maxWait
		
			options.maximumAge = 0; // Force current locations only
			options.enableHighAccuracy = true; // Force high accuracy (otherwise, why are you using this function?)
		
			var watchID = navigator.geolocation.watchPosition(checkLocation, onError, options);
			var timerID = setTimeout(stopTrying, options.maxWait); // Set a timeout that will abandon the location loop
		}
		*/
    </script>
	<script type="text/javascript"> 
	
		var taxi = $.localStorage.getItem('taxi');
		var tel = $.localStorage.getItem('tel');
		var email = $.localStorage.getItem('email');
		var civil = $.localStorage.getItem('civil');
		var nom = $.localStorage.getItem('nom');
		var prenom = $.localStorage.getItem('prenom');
		var siret = $.localStorage.getItem('siret');
		var station = $.localStorage.getItem('station');
		var group = $.localStorage.getItem('group');
		var mngid = $.localStorage.getItem('mngid');
		var pass = $.localStorage.getItem('pass');
		var id_station = $.localStorage.getItem('id_station');
		var name_station = $.localStorage.getItem('name_station');
		var ticket = $.localStorage.getItem('ticket');
		var idcourse = $.sessionStorage.setItem('idcourse', '');
		var idcourseUrg = $.sessionStorage.setItem('idcourseUrg', '');
		var rdv = $.sessionStorage.setItem('rdv', '');
		var com = $.sessionStorage.setItem('com', '');
		var cell = $.sessionStorage.setItem('cell', '');
		var cmd = $.sessionStorage.setItem('cmd', 0);
		var query_string = $.sessionStorage.setItem('query_string', '');
		var delay = 10;

        // Lecteur audio
        var my_media = null;
        var mediaTimer = null;

		// Scanner
		var scanner;
		
		// Detect wether it is an App or WebApp
		var app;
		
		// getLocation & secureCall
		var lat = 0;
		var lng = 0;
		
        var mobileDemo = { 'center': '43.298977,5.386320', 'zoom': 10 };
                
        ////////////////////////////////////////////////////////////
		//$(document).on( 'pagebeforecreate', '#directions_map', function() {
		$( '#directions_map' ).live( 'pagebeforeshow',function(event){
			$("#infos_map").empty();
			var idcourse = $.sessionStorage.getItem('idcourse');
			var rdv = $.sessionStorage.getItem('rdv');
			var com = $.sessionStorage.getItem('com');
			var cell = $.sessionStorage.getItem('cell');
			var cmd = $.sessionStorage.getItem('cmd');
			//document.getElementById('to').value = rdv;
			$('#to').val(rdv);

			var infos = '<p>';
			if (cell != '')
			{
				infos += '<a data-ajax="false" href="tel:' + cell + '" class="ui-btn ui-corner-all ui-shadow ui-icon-phone ui-btn-icon-left">Joindre le client</a>';
			}
			if (com != '')
			{
				infos += '<b>Infos RDV : ' + com + '</b>';
			}
			if (idcourse != '')
			{
				infos += '<br>N&deg; de course : <b>' + idcourse + '</b>';
			}
			infos += '</p>';
			$("#infos_map").append(infos);			
			if (rdv != '')
			{
				$.post("https://ssl14.ovh.net/~taxibleu/client/in_app_calls.php", { map: 'true', cmd: cmd, rdv: rdv, com: com, idcourse: idcourse, cell: cell, pass: pass }, function(data){
					$("#infos_map").append(data);
					$("#infos_map").trigger('create');
					//alert(data);
				});
			}
		});

        $('#directions_map').live('pagecreate', function() {
            demo.add('directions_map', function() {
                $('#map_canvas_1').gmap({'center': mobileDemo.center, 'zoom': mobileDemo.zoom, 'disableDefaultUI':true, 'callback': function() {
                    var self = this;
                    self.set('getCurrentPosition', function() {
                        self.refresh();
                        self.getCurrentPosition( function(position, status) {
                            if ( status === 'OK' ) {
                                var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude)
                                self.get('map').panTo(latlng);
                                self.search({ 'location': latlng }, function(results, status) {
                                    if ( status === 'OK' ) {
                                        $('#from').val(results[0].formatted_address);
										var rdv = $.sessionStorage.getItem('rdv');
										//document.getElementById('to').value = rdv;
										if (rdv != '')
										{
											$('#submit').trigger('click');
										}
                                    }
                                });
                            } else {
                                alert('Unable to get current position');
                            }
                        },{enableHighAccuracy:true, maximumAge:Infinity});
                    });
                    $('#submit').click(function() {
                        self.displayDirections({ 'origin': $('#from').val(), 'destination': $('#to').val(), 'travelMode': google.maps.DirectionsTravelMode.DRIVING }, { 'panel': document.getElementById('directions')}, function(response, status) {
                            ( status === 'OK' ) ? $('#results_gps').show() : $('#results_gps').hide();
                        });
                        return false;
                    });
                }});
            }).load('directions_map');
						
        });
        
        $('#directions_map').live('pagecontainershow', function() {
            demo.add('directions_map', $('#map_canvas_1').gmap('get', 'getCurrentPosition')).load('directions_map');
        });
		
        $('#toolate').live('pagecreate', function() {
			var idcourse = $.sessionStorage.getItem('idcourse');
            var late = '<p style="color:#F00; font-size: large;"><b>D&eacute;sol&eacute; mais la course ' + idcourse + ' &agrave; &eacute;t&eacute; prise par un autre taxi.</b></p>';
			$("#late_cont").empty().append(late);			
		});
        
        $('#delayPop').live( 'pagebeforeshow',function(event) {
			//$("#hideCall").hide("fast");
			$("#delayConf").hide("fast");
			//$('select#delay').val('d&eacute;lai');
			//$('select#delay').selectmenu('refresh', true);
		});

        $('#jobs_taker').live( 'pagecontainershow',function(event) {
			if(($.localStorage.getItem('id_station') == '') && ($.localStorage.getItem('ticket') == ''))
			{
				$( "#station" ).popup( "open", { positionTo: "window" } );
				//$.mobile.pageContainer.pagecontainer("change", "#station", { transition: "slide"} );
			}
		});

		$( '#planning' ).live( 'pagebeforeshow',function(event){
			$.post("https://ssl14.ovh.net/~taxibleu/client/in_app_calls.php", { planning: 'true', tel: tel, pass: pass }, function(data){
				$.mobile.loading( "show" );
				$("#plan_cont").empty().append(data);
				$("#plan_cont").trigger('create');
				//alert(data);
			}).done(function() { $.mobile.loading( "hide" ); });
		});

		$( '#history' ).live( 'pagebeforeshow',function(event){
			$.post("https://ssl14.ovh.net/~taxibleu/client/in_app_calls.php", { history: 'true', tel: tel, pass: pass }, function(data){
				$.mobile.loading( "show" );
				$("#hist_cont").empty().append(data);
				$("#hist_cont").trigger('create');
				//alert(data);
			}).done(function() { $.mobile.loading( "hide" ); });
		});

		$( '#infos' ).live( 'pagebeforeshow',function(event){
			$.post("https://ssl14.ovh.net/~taxibleu/client/in_app_calls.php", { infos: 'true', pass: pass }, function(data){
				$.mobile.loading( "show" );
				$("#infos_cont").empty().append(data);
				$("#infos_cont").trigger('create');
				//alert(data);
			}).done(function() { $.mobile.loading( "hide" ); });
		});

        $('#manage').live('pagecreate', function() {
			var dec_nom = $('#nom').html(nom).text();
			var dec_prenom = $('#prenom').html(prenom).text();
			var dec_station = $('#station').html(station).text();
			$('#login').val(tel);
			$('#nom').val(dec_nom);
			$('#prenom').val(dec_prenom);
			$('#taxi').val(taxi);
			$('#tel').val(tel);
			$('#email').val(email);
			$('#siret').val(siret);
			$('#station').val(dec_station);
			$('#log').val(tel);
			$.post("https://ssl14.ovh.net/~taxibleu/client/billing.php", { taxi: taxi, pass: pass, dep: '', mngid: mngid }, function(data){
				$("#billing").empty().append(data);
				//alert(data);
			});
		});
		
        function getLocation()
        {
            if (navigator.geolocation)
            {
                navigator.geolocation.getCurrentPosition(get_coords, showError,{enableHighAccuracy:true, maximumAge:0});
				//var watchId = navigator.geolocation.watchPosition(get_coords, showError);
				//navigator.geolocation.getAccurateCurrentPosition(get_coords, showError, {maxWait:30000});
            }
            else {
				alert("Localisation impossible.");
            }
            setTimeout('getLocation()', 60000); // Every minutes you check geolocation...
        }
				
		function stopWatch()
		{
			navigator.geolocation.clearWatch(watchId);
		}
		
        function showPosition(position)
		{
			var latlon=position.coords.latitude+","+position.coords.longitude;
			
			var img_url="http://maps.googleapis.com/maps/api/staticmap?center="
			+latlon+"&zoom=14&size=600x400&sensor=false&key=AIzaSyCvL4a4-LKLUXJrTwpJ4_UnkmtZSGgrVWg";
			document.getElementById("mapholder").innerHTML="<img src='"+img_url+"' />";
		}			  
		function showError(error)
		{
			var x=document.getElementById("ePopResults");
			switch(error.code) 
			{
				case error.PERMISSION_DENIED:
				  x.innerHTML="<strong>Vous avez refus&eacute; l&rsquo;acc&egrave;s &agrave; la G&eacute;olocalisation.</strong>"
				  break;
				case error.POSITION_UNAVAILABLE:
				  x.innerHTML="<strong>G&eacute;olocalisation indisponible, veuillez regarder dans l&rsquo;aide ou activer le service dans les reglages de votre appareil.</strong>"
				  break;
				case error.TIMEOUT:
				  x.innerHTML="<strong>La demande de G&eacute;olocalisation a expir&eacute;(user location request timed out).</strong>"
				  break;
				case error.UNKNOWN_ERROR:
				  x.innerHTML="<strong>Erreur inconnue de G&eacute;olocalisation (unknown error occurred).</strong>"
				  break;
				default:
				  x.innerHTML="<strong>Veuillez activer la G&eacute;olocalisation, si ce message revient, un red&eacute;marrage du smartphone peut-&ecirc;tre n&eacute;c&eacute;ssaire.</strong>"
			}
			// Fall back to no options and try again for Android to work.
			navigator.geolocation.getCurrentPosition(get_coords, function(){
				$( "#errorPop" ).popup( "open", { positionTo: "window" } );
			});
		}			  
        function get_coords(position) 
        {
            lat = position.coords.latitude;
            lng = position.coords.longitude;
			var id_station = $.localStorage.getItem('id_station');
			var name_station = $.localStorage.getItem('name_station');
			var ticket = $.localStorage.getItem('ticket');
            $.post("https://ssl14.ovh.net/~taxibleu/client/insert_app_stm_geoloc.php?lat="+lat+"&lng="+lng, { taxi: taxi, tel: tel, pass: pass, id_station: id_station, ticket: ticket }, function(data){
				if (data.exit == 1)
				{
					alert('Vous venez de quitter la station '+name_station);
					$.localStorage.setItem('ticket', '');
					$.localStorage.setItem('id_station', '');
					$.localStorage.setItem('name_station', '');
					$('#jobResults').empty();
					$('#offCont').hide();
					$('#hookerCont').show();
					$('#nohooker').text(' ANNULER ');
					$("#stationResults").empty();
				}
				else {
					if((id_station != '') && (ticket != '')) {
						$.localStorage.setItem('ticket', data.ticket);
						$("#jobResults").empty().append('<p><b>'+name_station+' - ID= '+id_station+' - Ticket= '+data.ticket+'</b></p>');
					}
				}
			}, "json"); 
        }

		function update()
		{
			var dispo = $.sessionStorage.getItem('dispo');
			$.post("https://ssl14.ovh.net/~taxibleu/server/get_app_drive.php", { taxi: taxi, tel: tel, email: email, dispo: dispo, pass: pass, mngid: mngid, group: group }, function(data){ 
				$("#screen_job").empty().append(data);
				if (data != 0)
				{
					$("#warn").empty().append('<a href="#jobs_taker"><img src="visuels/Alerte_course_flat.png" width="100%"/></a>');
					$("#warn_home").empty().append('<a href="#jobs_taker"><img src="visuels/Alerte_course_flat.png" width="100%"/></a>');
					document.getElementById("play").play();
					document.getElementById("play_home").play();
					//navigator.notification.beep(2);
					navigator.notification.vibrate(3600);
				}
				else
				{
					$("#warn").empty().append('<a href="#jobs_taker"><img src="visuels/Aucune_course_flat.png" width="100%"/></a>');
					$("#warn_home").empty().append('<a href="#jobs_taker"><img src="visuels/Aucune_course_flat.png" width="100%"/></a>');
					document.getElementById("play").pause();
					document.getElementById("play_home").pause();
				}
			});

			$.post("https://ssl14.ovh.net/~taxibleu/server/get_app_drive.php?cmd=1", { taxi: taxi, tel: tel, email: email, dispo: dispo, pass: pass, mngid: mngid, group: group }, function(data){ 
				$("#screen_job_cmd").empty().append(data);
				if (data != 0)
				{
					$("#warn_cmd").empty().append('<img src="visuels/Alerte_course_flat.png" width="100%"/>');
					document.getElementById("play_cmd").play();
					//navigator.notification.beep(2);
					navigator.notification.vibrate(3600);
				}
				else
				{
					$("#warn_cmd").empty().append('<a href="#jobs_taker"><img src="visuels/Aucune_course_flat.png" width="100%"/></a>');
					document.getElementById("play_cmd").pause();
				}
			});

		setTimeout('update()', 2000);
		}

		function dispo()
		{
			$.post("https://ssl14.ovh.net/~taxibleu/client/dispo_app.php?check=1", { taxi: taxi, tel: tel, pass: pass }, function(data){ 
				var display = '';
				if (data.dispo == 1)
				{
					display = '<a href="#home" onClick="Dispo_Off()" style=""><img src="visuels/DispoOn_flat.png" width="100%"/></a>';
				}
				else {
					display = '<a href="#jobs_taker" onClick="Dispo_On()" style=""><img src="visuels/DispoOff_flat.png" width="100%"/></a>';
				}
				$("#dispo").empty().append(display);
				$("#dispo_jobs").empty().append(display);
				$("#dispo_cmd").empty().append(display);
				$.sessionStorage.setItem('dispo', data.dispo);
				//alert(data.dispo);
			}, "json"); 
			/*
			$.post("dispo.php?check=1&p=home", {}, function(data){ $("#dispo").each(function () {
						$(this).empty().append(data);
					});
			}); 
			*/
			setTimeout('dispo()', 60000); // Every ten seconds you check dispo for real or oldies...
		}
		function Dispo_On()
		{
			$.post("https://ssl14.ovh.net/~taxibleu/client/dispo_app.php?dispo=1", { taxi: taxi, tel: tel, pass: pass });
			$("#dispo").empty().append('<a href="#home" onClick="Dispo_Off()"><img src="visuels/DispoOn_flat.png" width="100%"/></a>');
			$("#dispo_jobs").empty().append('<a href="#jobs_taker" onClick="Dispo_Off()"><img src="visuels/DispoOn_flat.png" width="100%"/></a>');
			$("#dispo_cmd").empty().append('<a href="#jobs_taker" onClick="Dispo_Off()"><img src="visuels/DispoOn_flat.png" width="100%"/></a>');
			$.sessionStorage.setItem('dispo', '1');
		}
		function Dispo_Off()
		{
			$.post("https://ssl14.ovh.net/~taxibleu/client/dispo_app.php?dispo=0", { taxi: taxi, tel: tel, pass: pass }); 
			$("#dispo").empty().append('<a href="#home" onClick="Dispo_On()"><img src="visuels/DispoOff_flat.png" width="100%"/></a>');
			$("#dispo_jobs").empty().append('<a href="#jobs_taker" onClick="Dispo_On()"><img src="visuels/DispoOff_flat.png" width="100%"/></a>');
			$("#dispo_cmd").empty().append('<a href="#jobs_taker" onClick="Dispo_On()"><img src="visuels/DispoOff_flat.png" width="100%"/></a>');
			$.sessionStorage.setItem('dispo', '0');
			offStation();
		}
		
        function playAudio(src) {
            // Créer l'objet Media à partir de src
            my_media = new Media(src, onSuccess, onError);

            // Lire le clip audio
            my_media.play();
			/*
            // Récupérer la positon courante une fois par seconde
            if (mediaTimer == null) {
                mediaTimer = setInterval(function() {
                    // Récupérer la positon de my_media
                    my_media.getCurrentPosition(
                        // Callback en cas de succès
                        function(position) {
                            if (position > -1) {
                                setAudioPosition((position) + " sec");
                            }
                        },
                        // Callback en cas d'erreur
                        function(e) {
                            console.log("Erreur lors de la récupération de la position = " + e);
                            setAudioPosition("Erreur : " + e);
                        }
                    );
                }, 1000);
            }
			*/
        }

        // Mettre en pause la lecture audio
        function pauseAudio() {
            if (my_media) {
                my_media.pause();
            }
        }

        // Arrêter la lecture audio
        function stopAudio() {
            if (my_media) {
                my_media.stop();
            }
            //clearInterval(mediaTimer);
            //mediaTimer = null;
        }
		
		function Sound_On()
		{
			$("#sound").empty().append('<a href="#jobs_taker" onClick="Sound_Off()"><img src="visuels/sound_on.png" width="20"/></a>');
			$("#sound_cmd").empty().append('<a href="#cmd" onClick="Sound_Off()"><img src="visuels/sound_on.png" width="20"/></a>');
			$("#player").empty().append('<audio id="play" loop="loop" preload="auto" style="display:none" ><source src="http://www.taxibleuservices.com/client/sounds/ring.mp3" type="audio/mpeg" />Your browser does not support the audio element.</audio>');
			$("#player_cmd").empty().append('<audio id="play_cmd" loop="loop" preload="auto" style="display:none" ><source src="http://www.taxibleuservices.com/client/sounds/ring.mp3" type="audio/mpeg" />Your browser does not support the audio element.</audio>');
			$("#player_home").empty().append('<audio id="play_home" loop="loop" preload="auto" style="display:none" ><source src="http://www.taxibleuservices.com/client/sounds/ring.mp3" type="audio/mpeg" />Your browser does not support the audio element.</audio>');
			//$.sessionStorage.setItem('sound', '1');
		}
		function Sound_Off()
		{
			$("#sound").empty().append('<a href="#jobs_taker" onClick="Sound_On()"><img src="visuels/sound_off.png" width="20"/></a>');
			$("#sound_cmd").empty().append('<a href="#cmd" onClick="Sound_On()"><img src="visuels/sound_off.png" width="20"/></a>');
			$("#player").empty();
			$("#player_cmd").empty();
			$("#player_home").empty();
			//$.sessionStorage.setItem('sound', '0');
		}
		function footer()
		{
			$.post("https://ssl14.ovh.net/~taxibleu/client/footer_app.php", function(data) {
				for (i=0; i<9; i++) {
					$('#footer_cont' + i).empty().append(data);
				}
			});
		}
		function addCalendar(date, rdv, com, idcourse, cell)
		{
			var startDate = new Date(date.replace(/-/g, '/'));
			var diff = 60; // difference in minutes
			var endDate = new Date(startDate.getTime() + diff*60000);
			var title = "Course en commande";
			var location = rdv;
			var notes = 'Infos RDV : ' + com + ' - Identifiant de la course : ' + idcourse + ' - Tel client : ' + cell;
			var success = function(message) { alert("AJOUT EVENEMENT AU CALENDRIER: " + JSON.stringify(message)); };
			var error = function(message) { alert("Erreur: " + message); };
			// create
			window.plugins.calendar.createEvent(title,location,notes,startDate,endDate,success,error);
		}
		function histoMap(rdv, idcourse, com, cell)
		{
			$.sessionStorage.setItem('rdv', rdv);
			$.sessionStorage.setItem('idcourse', idcourse);
			$.sessionStorage.setItem('com', com);
			$.sessionStorage.setItem('cell', cell);
			$.sessionStorage.setItem('cmd', 0);
			$.mobile.pageContainer.pagecontainer("change", "#directions_map", { transition: "slide"} );
		}
		function planMap(rdv, idcourse, com, cell)
		{
			$.sessionStorage.setItem('rdv', rdv);
			$.sessionStorage.setItem('idcourse', idcourse);
			$.sessionStorage.setItem('com', com);
			$.sessionStorage.setItem('cell', cell);
			$.sessionStorage.setItem('cmd', 1);
			$.mobile.pageContainer.pagecontainer("change", "#directions_map", { transition: "slide"} );
		}
		function justify(when, rdv, comments, destadd, cell)//justify(\''.$when.'\', \''.$rdv.'\', \''.$comments.'\', \''.$destadd.'\', \''.$cell.'\
		{
			$.post("https://ssl14.ovh.net/~taxibleu/client/justify.php", { when: when, rdv: rdv, comments: comments, destadd: destadd, cell: cell, dep: '', pass: pass, email: email }, function(data){
				$.mobile.loading( "show" );
				alert(data);
				//window.plugins.childBrowser.showWebPage('http://www.taximedia.fr', { showLocationBar: true });
			}).done(function() { $.mobile.loading( "hide" ); });
		}
		// diaryCall for direct job that open #delay
		function delayCall(query_string)
		{
			$.sessionStorage.setItem('query_string', query_string);
			$.mobile.pageContainer.pagecontainer("change", "#delayPop", { transition: "slide"} );
		}
		/*
		$(document).on( "click", "#directCall", function() {
			$.mobile.loading( "show" );
		});
		$(document).on( "click", "#diaryLink", function() {
			$.mobile.loading( "show" );
		});
		$(document).on( "click", ".hide-page-loading-msg", function() {
			$.mobile.loading( "hide" );
		});
		*/
		function directCall()
		{
			$.mobile.loading( "show" );
			// Getting query_string using sessionStorage
			var dataDiary = $.sessionStorage.getItem('query_string');
			// Modifying the link 2 diary
			//var link2diary = document.getElementById('link2diary');
			query_string = dataDiary + '&delay=' + delay;
			$.sessionStorage.setItem('query_string', query_string);
			$.post("https://ssl14.ovh.net/~taxibleu/server/diary_app_dcvp.php", query_string, function(data){ 
				switch (data.location) {
					 case '#directions_map':
						//alert('in direction case');
						$.sessionStorage.setItem('rdv', data.rdv);
						$.sessionStorage.setItem('idcourse', data.idcourse);
						$.sessionStorage.setItem('com', data.com);
						$.sessionStorage.setItem('cell', data.cell);
						$.sessionStorage.setItem('cmd', 0);
						offStation();
						$.mobile.pageContainer.pagecontainer("change", "#directions_map", { transition: "slide"} );
						 
						 break;
					 case '#toolate':
						$.mobile.pageContainer.pagecontainer("change", "#toolate", { transition: "slide"} );
						$.sessionStorage.setItem('idcourse', data.idcourse);
						 
						 break;
					 default: 
						$.mobile.pageContainer.pagecontainer("change", "#home", { transition: "slide"} );
						 
						 break;
				}					
			}, "json");
		}
		// Diary call when accepting cmd jobs or refusing jobs
		function diaryCall(query_string)
		{
			$.mobile.loading( "show" );
			$.post("https://ssl14.ovh.net/~taxibleu/server/diary_app_dcvp.php", query_string, function(data){ 
				switch (data.location) {
					 case '#directions_map':
						//alert('in direction case');
						$.sessionStorage.setItem('rdv', data.rdv);
						$.sessionStorage.setItem('idcourse', data.idcourse);
						$.sessionStorage.setItem('com', data.com);
						$.sessionStorage.setItem('cell', data.cell);
						$.sessionStorage.setItem('cmd', 1);
						offStation();
						$.mobile.pageContainer.pagecontainer("change", "#directions_map", { transition: "slide"} );
						 
						 break;
					 case '#toolate':
						$.mobile.pageContainer.pagecontainer("change", "#toolate", { transition: "slide"} );
						$.sessionStorage.setItem('idcourse', data.idcourse);
						 
						 break;
					 default: 
						$.mobile.pageContainer.pagecontainer("change", "#home", { transition: "slide"} );
						 
						 break;
				}					
			}, "json");
		}
		// Urgence call => Danger zone
        function getLocationOnce()
        {
            if (navigator.geolocation)
            {
				$.mobile.loading( "show" );
                navigator.geolocation.getCurrentPosition(secureCall, showError,{enableHighAccuracy:true, maximumAge:0});
				//var watchId = navigator.geolocation.watchPosition(get_coords, showError);
				//navigator.geolocation.getAccurateCurrentPosition(get_coords, showError, {maxWait:30000});
            }
            else {
				alert("Localisation impossible.");
            }
        }
		function secureCall(position)
		{			
            lat = position.coords.latitude;
            lng = position.coords.longitude;
			var rdvpoint = lat + ', ' + lng;
			var helpname = civil + ' ' + nom + ' ' + prenom;
			var myDate = new Date();
			var idcourseUrg = myDate.getTime();
			$.sessionStorage.setItem('idcourseUrg', idcourseUrg);
			
			$.post("https://ssl14.ovh.net/~taxibleu/client/secure_xml.php", { lat: lat, lng: lng, dep: '', pass: pass}, function(xml){
																									 
				var i = 0; // We need to make any numreq unique on that one !!
				$(xml).find('marker').each(function(){
					var name = $(this).attr('name');
					var address = $(this).attr('address');
					var lat2 = $(this).attr('lat');
					var lng2 = $(this).attr('lng');
					var timestamp = $(this).attr('timestamp');
					var distance = $(this).attr('distance');
					var num_reqUrg = idcourseUrg + i;
					//var title = $(this).find('title').text(); To get nodes inside
					//$('<div id='+name+'></div>').html('<p><b>'+name+' - '+address+' - '+lat+' - '+lng+' - '+timestamp+' - '+distance+'</b></p>').appendTo('#secureResults');
					//$('#secureResults').append('<p><b>'+name+' - '+address+' - '+lat+' - '+lng+' - '+timestamp+' - '+distance+'</b></p>');
					
					$.post("https://ssl14.ovh.net/~taxibleu/client/secure.php", { taxi: name, tel: address, rdvpoint: rdvpoint, helptaxi: taxi, helpname: helpname, helptel: tel, idcourse: idcourseUrg, num_req: num_reqUrg, dep: '', pass: pass}, function(data){
						//$('#secureResults').append(data);
					});
					i++;
				});
				check_answer();
				//alert('Geoloc results :' + lat + ' - ' + lng);
				//$('#results').append('<p><b>'+name+' - '+address+' - '+lat+' - '+lng+' - '+timestamp+' - '+distance+'</b></p>');
				
			}, "xml");
		}
		function check_answer()
		{
			$.mobile.pageContainer.pagecontainer("change", "#urgency", { transition: "slide"} );
			var idcourseUrg = $.sessionStorage.getItem('idcourseUrg');
			sec = setInterval( function () {
				$.post("https://ssl14.ovh.net/~taxibleu/client/status.php?idcourse=" + idcourseUrg + "&check=1" , { dep: '13'}, function(data){ 
					if (data != 0)
					{
						//cancel(idcourse);
						//$('#dblinks').append($('<input id="stop" type="hidden" value="1" />'));
						//var box = alert(data);
						$('#urgencyResults').empty().append(data);
					}
				}); 
			}, 6000);
			return false;
		}
		function stopSecureCall()
		{
			var idcourseUrg = $.sessionStorage.getItem('idcourseUrg');
			$.post("https://ssl14.ovh.net/~taxibleu/client/secure.php", { taxi: '', tel: '', rdvpoint: '', helptaxi: taxi, helpname: '', helptel: tel, idcourse: idcourseUrg, dep: '', pass: pass, stopcall: 'true'}, function(data){
				$.mobile.pageContainer.pagecontainer("change", "#home", { transition: "slide"} );
			});
			//$.sessionStorage.setItem('idcourseUrg', false);
			clearInterval(sec);
		}

        function getLocationHook()
        {
            if (navigator.geolocation)
            {
				$.mobile.loading( "show" );
                navigator.geolocation.getCurrentPosition(getStation, showErrorHook,{enableHighAccuracy:true, maximumAge:0});
            }
            else {
				alert("Localisation impossible.");
            }
        }
        function showErrorHook(error)
		{
			var x=document.getElementById("stationResults");
			switch(error.code) 
			{
				case error.PERMISSION_DENIED:
				  x.innerHTML='<p style="color:red;"><b>Vous avez refus&eacute; l&rsquo;acc&egrave;s &agrave; la G&eacute;olocalisation.</b></p>'
				  break;
				case error.POSITION_UNAVAILABLE:
				  x.innerHTML='<p style="color:red;"><b>G&eacute;olocalisation indisponible, veuillez regarder dans l&rsquo;aide ou activer le service dans les reglages de votre appareil.</b></p>'
				  break;
				case error.TIMEOUT:
				  x.innerHTML='<p style="color:red;"><b>La demande de G&eacute;olocalisation a expir&eacute;(user location request timed out).</b></p>'
				  break;
				case error.UNKNOWN_ERROR:
				  x.innerHTML='<p style="color:red;"><b>Erreur inconnue de G&eacute;olocalisation (unknown error occurred).</b></p>'
				  break;
			}
		}			  

        function getStation(position)
        {
            lat = position.coords.latitude;
            lng = position.coords.longitude;
			$("#stationResults").append('Geoloc OK...');
			$.mobile.loading( "hide" );
			$.post("https://ssl14.ovh.net/~taxibleu/client/get_station.php", { taxi: taxi, tel: tel, pass: pass, lat: lat, lng: lng }, function(data){ 
				var display = '';
				if (data.hooked == 1)
				{
					display = '<p style="color:green;"><b>Station: '+data.name_station+' Num&eacute;ro d&rsquo;ordre acquis: '+data.ticket+' id_station = '+data.id_station+' - distance = '+data.distance+' m</b></p>';
					$('#hookerCont').hide();
					$('#nohooker').text(' CONTINUER ');
					$("#jobResults").empty().append('<p><b>'+data.name_station+' - N&deg;Ordre = '+data.ticket+'</b></p>');
					$('#offCont').show();
					$('#getCont').hide();
					Dispo_On();
				}
				else {
					if (data.toofar == 1) {
						display = '<p style="color:red;"><b>La station la plus proche est trop &eacute;loign&eacute;e !!</b></p>';
						$('#hooker').val('REESSAYER');
					}
					if (data.full == 1) {
						display = '<p style="color:red;"><b>La station '+data.name_station+' est pleine !!</b></p>';

						$('#hooker').val('REESSAYER');
					}
				}
				$("#stationResults").empty().append(display);
				$.localStorage.setItem('ticket', data.ticket);
				$.localStorage.setItem('id_station', data.id_station);
				$.localStorage.setItem('name_station', data.name_station);
				
			}, "json"); 
        }

		function offStation()
		{
			if(($.localStorage.getItem('id_station') != '') && ($.localStorage.getItem('ticket') != ''))
			{
				//if we hooked to a station, we hook off
				var id_station = $.localStorage.getItem('id_station');
				var ticket = $.localStorage.getItem('ticket');
				$.post("https://ssl14.ovh.net/~taxibleu/client/off_station.php", { taxi: taxi, tel: tel, pass: pass, id_station: id_station, ticket: ticket});
				$.localStorage.setItem('ticket', '');
				$.localStorage.setItem('id_station', '');
				$.localStorage.setItem('name_station', '');
				$('#jobResults').empty();
				$('#offCont').hide();
				$('#getCont').show();
				$('#hookerCont').show();
				$('#nohooker').text(' ANNULER ');
				$("#stationResults").empty();
			}
		}
		
		function taximedia()
		{
			//window.plugins.childBrowser.showWebPage('http://www.taximedia.fr/redir.php', { showLocationBar: true });
			window.open('http://www.taximedia.fr/redir.php','_blank','location=yes,enableViewportScale=yes,closebuttoncaption=Fermer');
		}
		function help()
		{
			//window.plugins.childBrowser.showWebPage('http://taxibleuservices.com/client/help.html', { showLocationBar: true });
			window.open('http://taxibleuservices.com/client/help.html','_blank','location=yes,enableViewportScale=yes,closebuttoncaption=Fermer');
		}
		function cgv()
		{
			//window.plugins.childBrowser.showWebPage('http://taxibleuservices.com/client/docs/CGV.pdf', { showLocationBar: true });
			window.open('http://taxibleuservices.com/client/docs/CGV.pdf','_blank','location=yes,enableViewportScale=yes,closebuttoncaption=Fermer');
		}
		function unEasy()
		{
			$.mobile.loading( "show" );
			$.localStorage.setItem('easy', false)
			var wait2go = setTimeout( function () {
				document.location.href='home.html';
			}, 1000);
		}
		
		// Checks App or Browser
		app = document.URL.indexOf( 'http://' ) === -1 && document.URL.indexOf( 'https://' ) === -1 && document.URL.indexOf("localhost") != 7;
		if ( app ) {
			// PhoneGap application
			// Attendre que PhoneGap soit prêt	    //
			document.addEventListener("deviceready", onDeviceReady, false);
		
			// PhoneGap est prêt
			function onDeviceReady() {
				//navigator.geolocation.getCurrentPosition(onSuccess, onError);
				navigator.splashscreen.hide();
				if(navigator.network.connection.type == Connection.NONE){
					$("body").empty().append('<img src="no_network.png" onClick="window.location.reload()" />');
				}
				getLocation();
				scanner = cordova.require("cordova/plugin/BarcodeScanner");
			}
		}
		
		var scanSuccess = function (result) {
			var textFormats = "QR_CODE DATA_MATRIX";
			var productFormats = "UPC_E UPC_A EAN_8 EAN_13";
			if (result.cancelled) { return; }
			if (textFormats.match(result.format)) {                
				var scanVal = result.text;
				if (scanVal.indexOf("http") === 0) {
					setTimeout(function() { 
						//window.plugins.childBrowser.showWebPage(result.text, { showLocationBar: true }); 
						window.open(result.text,'_blank','location=yes,enableViewportScale=yes,closebuttoncaption=Fermer');
					}, 500);
				} else {
					navigator.notification.alert(
							result.text,
							function (){},
							'Scan Value:',
							'Done'
						);
				}
			} else if (productFormats.match(result.format)) {
				var searchUrl = "https://www.google.fr/#q=" + result.text;
				setTimeout(function() { window.plugins.childBrowser.showWebPage(searchUrl, { showLocationBar: true }); }, 500);
				//setTimeout(function() { //window.open(searchUrl,'_blank','location=yes'); }, 500);
			} else { alert("Format du scan: " + result.format + 
					  " NON SUPPORTE. Valeur du scan: " + result.text);
			}
		}
		function goScan ()
		{
			scanner.scan(
				scanSuccess, 
				function (error) {
					alert("Scan Erreur: " + error);
				}
			);
		}
		/*
		// Swiping between pages function
		$('div.ui-page').live("swipeleft", function(){
			var nextpage = $(this).next('div[data-role="page"]');
			// swipe using id of next page if exists
			if (nextpage.length > 0) {
				$.mobile.changePage(nextpage, 'slide');
			}
		});
		$('div.ui-page').live("swiperight", function(){
			var prevpage = $(this).prev('div[data-role="page"]');
			// swipe using id of next page if exists
			if (prevpage.length > 0) {
				$.mobile.changePage(prevpage, 'slide', true);
			}
		});
		*/		
		$('#home').live("swiperight", function() {
			//$.mobile.pageContainer.pagecontainer("change", "#home"), { transition: "slide", reverse: true} );
			$("#homepanel_poper").trigger('click');
		});
		$('#home .ui-content').live("swipeleft", function() {
			Dispo_On(); 
			$.mobile.pageContainer.pagecontainer("change", "#jobs_taker", { transition: "slide"} );
		});
		$('#jobs_taker').live("swiperight", function() {
			$.mobile.pageContainer.pagecontainer("change", "#home", { transition: "slide", reverse: true} );
		});
		$('#jobs_taker .ui-content').live("swipeleft", function() {
			$.mobile.pageContainer.pagecontainer("change", "#history", { transition: "slide"} );
		});
		$('#history').live("swiperight", function() {
			$.mobile.pageContainer.pagecontainer("change", "#jobs_taker", { transition: "slide", reverse: true} );
		});
		$('#history .ui-content').live("swipeleft", function() {
			$.mobile.pageContainer.pagecontainer("change", "#home", { transition: "slide"} );
		});
		$('#cmd').live("swiperight", function() {
			$.mobile.pageContainer.pagecontainer("change", "#home", { transition: "slide", reverse: true} );
		});
		$('#cmd .ui-content').live("swipeleft", function() {
			$.mobile.pageContainer.pagecontainer("change", "#planning", { transition: "slide"} );
		});
		$('#planning').live("swiperight", function() {
			$.mobile.pageContainer.pagecontainer("change", "#cmd", { transition: "slide", reverse: true} );
		});
		$('#planning .ui-content').live("swipeleft", function() {
			$.mobile.pageContainer.pagecontainer("change", "#home", { transition: "slide"} );
		});
		$('#directions_map').live("swiperight", function() {
			$("#mapPanel_poper").trigger('click');
		});
					
		$(document).bind( 'pagecreate', function() {
		
			var tel = $.localStorage.getItem('tel');
			$.post("https://ssl14.ovh.net/~taxibleu/client/active_app.php", { tel: tel, dep: '13'}, function(data) {
				// GET SHIT BACK !!
				$.localStorage.setItem('civil', data.civil);
				$.localStorage.setItem('nom', data.nom);
				$.localStorage.setItem('prenom', data.prenom);
				$.localStorage.setItem('taxi', data.taxi);
				$.localStorage.setItem('tel', data.tel);
				$.localStorage.setItem('siret', data.siret);
				$.localStorage.setItem('email', data.email);
				$.localStorage.setItem('station', data.station);
				$.localStorage.setItem('group', data.group);
			}, "json");
			if(!$.localStorage.getItem('pass'))
			{
				document.location.href='index.html';
				//$.mobile.changePage( "test.html", { transition: "slide"} );
			}
			if(($.localStorage.getItem('taxi') == '') || ($.localStorage.getItem('tel') == ''))
			{
				document.location.href='index.html';
				//$.mobile.changePage( "test.html", { transition: "slide"} );
			}
			// Avoids Cabs to register to multiple stations shuting down the app in between.
			offStation();
			
			//setTimeout('dispo()', 10000);
			if(!app) getLocation();
			dispo();
			update();
			footer();
			//update_cmd();
			//setTimeout('JobWatcher()', 2000); // Starts after 2 seconds...
			
			$("select#delay").change(function () {
				var str = "Temps d'approche : ";
				$("select#delay option:selected").each(function () {
					str += $(this).text();
				});
				
				// Getting delay list value
				delay = document.getElementById('delay').value;
				//$("#hideCall").show("fast");
				$("#delayConf").html(str);
				$("#delayConf").show("fast");
				//$("#link2diary").trigger('click');

			});
						
		});
	</script>
	<script type="text/javascript">
    
      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-35285544-1']);
      _gaq.push(['_trackPageview']);
    
      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    
    </script>
    </head>
    <body>
    <center>
        <div data-role="page" data-theme="a" id="home">

            <div data-role="panel" id="homepanel" data-position="left" data-display="reveal" data-theme="e">
                <!-- panel content goes here -->
                <ul data-role="listview" data-inset="true" data-theme="b">
                  <li><a href="#home" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-home"><b>Accueil</b></a></li>
                  <li><a href="#jobs_taker" data-transition="slide"><b>Courses directes</b></a></li>
                  <li><a href="#cmd" data-transition="slide"><b>Courses command&eacute;es</b></a></li>
                  <li><a href="#history" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bars"><b>Historique</b></a></li>
                  <li><a href="#planning" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-calendar"><b>Planning</b></a></li>
                  <li><a href="#manage" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-user"><b>Mon compte</b></a></li>
                  <li><a href="#directions_map" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-location"><b>Carte GPS</b></a></li>
                  <li><a href="#" onClick="help()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bullets"><b>Aide utilisateur</b></a></li>
                  <li><a href="#" onClick="taximedia()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-eye"><b>TaxiMedia.fr</b></a></li>
                  <li><a href="#infos" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-info"><b>Infos STM</b></a></li>
                  <li><a href="dcvpad.html" data-ajax="false" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-action"><b>Envoyer une course</b></a></li>
                </ul>
                <a href="#"  onClick="unEasy()" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-power">Mode Avanc&eacute;</a>
                <a href="#home" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete">Fermer</a>
            </div><!-- /panel -->
            <div class="ui-content" role="main" id="home_cont">
                <div class="ui-bar-b ui-corner-all ui-shadow" style="padding:1em; text-align: left;">
                <div style="text-align: left;">
                    <div id="dispo">
						<a href="#home" onClick="Dispo_Off()"><img src="visuels/DispoOn_flat.png" width="100%"/></a>
                	</div>
                    <div id="warn_home">
                    	<a href="#jobs_taker" data-transition="slide" id="go2jobs">
                            <img src="visuels/Aucune_course_flat.png" width="100%"/>
                        </a>
                    </div>
                </div>
                </div>
                <img src="visuels/p1.png" width="128"/>
                <div class="ui-bar-b ui-corner-all ui-shadow" style="padding:1em;">
					<a href="#history" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                        	<img src="visuels/Historique_flat.png" width="90%"/><br>
                    		Historique
                        </p>
                    </a>
					<a href="#cmd" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                            <img src="visuels/Ordered_flat.png" width="90%"/><br>
                            Commandes
                        </p>
                    </a>
					<a href="#planning" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                        	<img src="visuels/Planning_flat.png" width="90%"/><br>
                    		Planning
                        </p>
                    </a>
					<a href="#" onClick="help()" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                            <img src="visuels/Help_flat.png" width="90%"/><br>
                            Aide utilisateur
                        </p>
                    </a>
					<a href="#manage" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                            <img src="visuels/Facture_flat.png" width="90%"/><br>
                            Mon compte
                        </p>
                    </a>
					<a href="#directions_map" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                        	<img src="visuels/Maps_flat.png" width="90%"/><br>
                    		GPS
                        </p>
                    </a>
					<a href="#infos" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                            <img src="visuels/stm_flat.png" width="90%"/><br>
                            Infos STM
                        </p>
                    </a>
					<a href="#" onClick="taximedia()" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                            <img src="visuels/TaxiMedia_flat.png" width="90%"/><br>
                            TaxiMedia.fr
                        </p>
                    </a>
					<a href="dcvpad.html" data-ajax="false" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                            <img src="visuels/Taxi.png" width="90%"/><br>
                            Partager
                        </p>
                    </a>
                    <!-- N&rsquo;oubliez pas de vous rendre indisponible quand vous ne d&eacute;sirez plus prendre de courses, cela vous &eacute;vitera d&rsquo;&ecirc;tre importun&eacute; durant votre repos.<br> -->
                </div>
                <div id="results"></div>
                <a href="#secureDialog" data-rel="popup" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-alert">Bouton d&rsquo;urgence</a>
                <div data-role="popup" data-theme="a" id="secureDialog" data-dismissible="false" data-overlay-theme="b">
                    <div data-theme="a" data-role="header">
                        <h1>
                            Confirmation
                        </h1>
                    </div>
                    <div class="ui-content" role="main">
                        <h1>Lancer l&rsquo;appel d&rsquo;urgence ?</h1>
                        <input type="button" data-theme="b" data-icon="check" onClick="getLocationOnce()" value="CONFIRMER"/>
                        <a href="#home" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-icon-back ui-btn-icon-left" data-transition="slideUp">ANNULER</a>            
                        <div id="secureResults"></div>
                    </div>
                </div>        
                <div data-role="popup" data-theme="a" id="errorPop" data-dismissible="true" data-overlay-theme="b">
					<a href="#home" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-icon-delete ui-btn-icon-notext ui-btn-right">Fermer</a>
                    <div data-theme="a" data-role="header">
                        <h1>
                            G&eacute;olocalisation
                        </h1>
                    </div>
                    <div class="ui-content" role="main">
                        <div id="ePopResults"></div>
                    </div>
                </div>
                <div id="player_home">
                    <audio id="play_home" loop="loop" preload="auto" style="display:none" >
                        <source src="http://www.taxibleuservices.com/client/sounds/ring.mp3" type="audio/mpeg" />
                        Your browser does not support the audio element.
                    </audio>
                </div>
                <a href="#homepanel" id="homepanel_poper"></a>
            </div>
            <div data-theme="a" data-role="footer" id="footer_cont0" data-position="fixed">
				<div class="ui-bar-b ui-corner-all ui-shadow" style="width:96%;height:19px;"><marquee><b>Mise &agrave; jour des information DCVP en cours.</b></marquee></div>
                <p class="copyright" style="font-size:xx-small">&copy; 2012 - </p>
            </div>
        </div>
        
        <div data-role="page" data-theme="a" id="jobs_taker">
            <div data-role="panel" id="jobs_panel" data-position="left" data-display="reveal" data-theme="e">
                <!-- panel content goes here -->
                <ul data-role="listview" data-inset="true" data-theme="b">
                  <li><a href="#home" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-home"><b>Accueil</b></a></li>
                  <li><a href="#jobs_taker" data-transition="slide"><b>Courses directes</b></a></li>
                  <li><a href="#cmd" data-transition="slide"><b>Courses command&eacute;es</b></a></li>
                  <li><a href="#history" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bars"><b>Historique</b></a></li>
                  <li><a href="#planning" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-calendar"><b>Planning</b></a></li>
                  <li><a href="#manage" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-user"><b>Mon compte</b></a></li>
                  <li><a href="#directions_map" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-location"><b>Carte GPS</b></a></li>
                  <li><a href="#" onClick="help()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bullets"><b>Aide utilisateur</b></a></li>
                  <li><a href="#" onClick="taximedia()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-eye"><b>TaxiMedia.fr</b></a></li>
                  <li><a href="#infos" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-info"><b>Infos STM</b></a></li>
                  <li><a href="dcvpad.html" data-ajax="false" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-action"><b>Envoyer une course</b></a></li>
                </ul>
                <a href="#"  onClick="unEasy()" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-power">Mode Avanc&eacute;</a>
                <a href="#jobs_taker" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete">Fermer</a>
            </div><!-- /panel -->
            <div data-theme="a" data-role="header" data-position="fixed">
				<h1 style="padding: 0; margin: 0;">
                    <a data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-back ui-btn-inline" data-transition="slide"><b>Retour</b></a>            
                    <a href="#jobs_panel" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-home ui-btn-inline" data-transition="slide"><b>Menu</b></a>
                </h1>
            </div>
            <div class="ui-content" role="main">
                <div id="sound">
                    <a href="#jobs_taker" onClick="Sound_Off()"><img src="visuels/sound_on.png" width="20"/></a>
                </div>
                <div class="ui-bar-b ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="dispo_jobs">                                            
                    </div>
                    <div id="warn">
                    	<a href="#jobs_taker"><img src="visuels/Aucune_course_flat.png" width="100%"/></a>
                    </div>
                </div>
                <img src="visuels/p2.png" width="128"/>
                <div class="ui-bar-b ui-corner-all ui-shadow" style="padding:1em;">
                    <h2 style="color:#0F0; font-size:large;">En attente de courses</h2><hr>
                    <div id="screen_job" style="text-align:left;">
                    </div>
                    
                    <hr>
                    <div id="jobResults"></div>
                    <div id="offCont" style="display:none;">
                        <input type="button" data-theme="b" data-icon="delete" onClick="offStation()" id="off" value="Sortir de la Station"/>
                    </div>
                    <div id="getCont">
                        <a href="#station" data-rel="popup" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-info">Travail en Station</a>
                    </div>
					<a href="#history" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                        	<img src="visuels/Historique_flat.png" width="90%"/><br>
                    		Historique
                        </p>
                    </a>
					<a href="#planning" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                        	<img src="visuels/Planning_flat.png" width="90%"/><br>
                    		Planning
                        </p>
                    </a>
					<a href="#cmd" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                            <img src="visuels/Ordered_flat.png" width="90%"/><br>
                            Commandes
                        </p>
                    </a>
                </div>
                <div class="cleaner"></div>
                <a href="#secureDialogJobs" data-rel="popup" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-alert">Bouton d&rsquo;urgence</a>
                <div data-role="popup" data-theme="a" id="secureDialogJobs" data-dismissible="false" data-overlay-theme="b">
                    <div data-theme="a" data-role="header">
                        <h1>
                            Confirmation
                        </h1>
                    </div>
                    <div class="ui-content" role="main">
                        <h1>Lancer l&rsquo;appel d&rsquo;urgence ?</h1>
                        <input type="button" data-theme="b" data-icon="check" onClick="getLocationOnce()" value="CONFIRMER"/>
                        <a href="#home" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete" data-transition="slideUp">ANNULER</a>            
                        <div id="secureResults"></div>
                    </div>
                </div>        
                <div id="player">
                
                    <audio id="play" loop="loop" preload="auto" style="display:none;">
                        <source src="http://www.taxibleuservices.com/client/sounds/ring.mp3" type="audio/mpeg" />
                        Your browser does not support the audio element.
                    </audio>
                </div>
                <div data-role="popup" data-theme="a" id="station" data-dismissible="false" data-overlay-theme="b">
                    <div data-theme="a" data-role="header">
                        <p class="auction"><b>
                            Travail en station
                        </b></p>
                    </div>
                    <div class="ui-content" role="main">
                        <p class="auction"><b>D&eacute;sirez-vous obtenir un num&eacute;ro d&rsquo;ordre ?</b></p>
                        <div id="hookerCont">
                            <input type="button" data-theme="b" data-icon="check" onClick="getLocationHook()" id="hooker" value="CONFIRMER"/>
                        </div>
                        <a href="#jobs_taker" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete" data-transition="slideUp" id="nohooker">ANNULER</a>
                        <div id="stationResults"></div>
                    </div>
                </div>                
           </div>
            <div data-theme="a" data-role="footer" id="footer_cont1" data-position="fixed">
            	<div class="ui-bar-b ui-corner-all ui-shadow" style="width:96%;height:19px;"><marquee><b>Mise &agrave; jour des information DCVP en cours.</b></marquee></div>
<p class="copyright" style="font-size:xx-small">&copy; 2012 - </p>
            </div>
        </div>
        <div data-role="page" id="delayPop" data-transition="pop" data-theme="a">
            <div data-role="panel" id="delay_panel" data-position="left" data-display="reveal" data-theme="e">
                <!-- panel content goes here -->
                <ul data-role="listview" data-inset="true" data-theme="b">
                  <li><a href="#home" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-home"><b>Accueil</b></a></li>
                  <li><a href="#jobs_taker" data-transition="slide"><b>Courses directes</b></a></li>
                  <li><a href="#cmd" data-transition="slide"><b>Courses command&eacute;es</b></a></li>
                  <li><a href="#history" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bars"><b>Historique</b></a></li>
                  <li><a href="#planning" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-calendar"><b>Planning</b></a></li>
                  <li><a href="#manage" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-user"><b>Mon compte</b></a></li>
                  <li><a href="#directions_map" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-location"><b>Carte GPS</b></a></li>
                  <li><a href="#" onClick="help()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bullets"><b>Aide utilisateur</b></a></li>
                  <li><a href="#" onClick="taximedia()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-eye"><b>TaxiMedia.fr</b></a></li>
                  <li><a href="#infos" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-info"><b>Infos STM</b></a></li>
                  <li><a href="dcvpad.html" data-ajax="false" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-action"><b>Envoyer une course</b></a></li>
                </ul>
                <a href="#"  onClick="unEasy()" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-power">Mode Avanc&eacute;</a>
                <a href="#delayPop" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete">Fermer</a>
            </div><!-- /panel -->
            <div data-theme="a" data-role="header" data-position="fixed">
				<h1 style="width:100%; padding: 0; margin: 0;">
                    <a data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-back ui-btn-inline" data-transition="slide"><b>Retour</b></a>            
                    <a href="#delay_panel" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-home ui-btn-inline" data-transition="slide"><b>Menu</b></a>
                </h1>
            </div>
            <div class="ui-content" role="main">
            	<p>&nbsp;</p>
                <div class="ui-bar-a ui-corner-all ui-shadow" style="padding:1em;">
                    <label for="delay">Temps d&rsquo;approche : </label>
                    <select name="delay" id="delay" data-theme="b">
                        <option selected value="5-10">d&eacute;lai</option>
                        <option value="0-5">0-5 minutes</option>
                        <option value="5-10">5-10 minutes</option>
                        <option value="10-15">10-15 minutes</option>
                        <option value="+ de 15">+ de 15 minutes</option>
                    </select>
                    <!-- 
                    <a href="#" id="link2diary" class="ui-btn ui-corner-all ui-shadow" data-iconpos="left" data-icon="check" data-theme="b" style="display:none;">Envoyer</a>
                    -->
                    <div id="hideCall">
                        <input type="button" id="directCall" value="Envoyer" onClick="directCall()" data-iconpos="left" data-icon="check" data-theme="b"/>
                    </div>
                    <div id="delayConf"></div>
                </div>
            </div>
            <div data-theme="a" data-role="footer" id="footer_cont2" data-position="fixed">
            	<div class="ui-bar-b ui-corner-all ui-shadow" style="width:96%;height:19px;"><marquee><b>Mise &agrave; jour des information DCVP en cours.</b></marquee></div>
<p class="copyright" style="font-size:xx-small">&copy; 2012 - </p>
            </div>
        </div>
        <div data-role="page" data-theme="a" id="cmd">
            <div data-role="panel" id="cmd_panel" data-position="left" data-display="reveal" data-theme="e">
                <!-- panel content goes here -->
                <ul data-role="listview" data-inset="true" data-theme="b">
                  <li><a href="#home" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-home"><b>Accueil</b></a></li>
                  <li><a href="#jobs_taker" data-transition="slide"><b>Courses directes</b></a></li>
                  <li><a href="#cmd" data-transition="slide"><b>Courses command&eacute;es</b></a></li>
                  <li><a href="#history" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bars"><b>Historique</b></a></li>
                  <li><a href="#planning" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-calendar"><b>Planning</b></a></li>
                  <li><a href="#manage" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-user"><b>Mon compte</b></a></li>
                  <li><a href="#directions_map" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-location"><b>Carte GPS</b></a></li>
                  <li><a href="#" onClick="help()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bullets"><b>Aide utilisateur</b></a></li>
                  <li><a href="#" onClick="taximedia()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-eye"><b>TaxiMedia.fr</b></a></li>
                  <li><a href="#infos" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-info"><b>Infos STM</b></a></li>
                  <li><a href="dcvpad.html" data-ajax="false" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-action"><b>Envoyer une course</b></a></li>
                </ul>
                <a href="#"  onClick="unEasy()" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-power">Mode Avanc&eacute;</a>
                <a href="#cmd" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete">Fermer</a>
            </div><!-- /panel -->
            <div data-theme="a" data-role="header" data-position="fixed">
				<h1 style="width:100%; padding: 0; margin: 0;">
                    <a data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-back ui-btn-inline" data-transition="slide"><b>Retour</b></a>            
                    <a href="#cmd_panel" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-home ui-btn-inline" data-transition="slide"><b>Menu</b></a>
                </h1>
            </div>
            <div class="ui-content" role="main">
                <div id="sound_cmd">
                    <a href="#cmd" onClick="Sound_Off()"><img src="visuels/sound_on.png" width="20"/></a>
                </div>
                <div class="ui-bar-b ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="dispo_cmd">                                            
                    </div>
                    <div id="warn_cmd">
                    	<a href="#jobs_taker"><img src="visuels/Aucune_course_flat.png" width="100%"/></a>
                    </div>
                </div>
                <img src="visuels/p2.png" width="128"/>
                <div class="ui-bar-b ui-corner-all ui-shadow" style="padding:1em;">
                    <h2 style="color:#0CF; font-size:large;">En attente de commandes</h2><hr>
                    <div id="screen_job_cmd" style="text-align:left;">
                    </div>
                    <hr>
					<a href="#history" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                        	<img src="visuels/Historique_flat.png" width="90%"/><br>
                    		Historique
                        </p>
                    </a>
					<a href="#planning" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                        	<img src="visuels/Planning_flat.png" width="90%"/><br>
                    		Planning
                        </p>
                    </a>
					<a href="#infos" data-transition="slide" style="width:32%;display:inline-block;">
                    	<p style="font-size: x-small;color:#FFF;">
                            <img src="visuels/stm_flat.png" width="90%"/><br>
                            Infos STM
                        </p>
                    </a>
                    <!-- 
					<a href="cmd.php" class="ui-btn ui-corner-all ui-shadow" data-icon="star" data-transition="slide" data-theme="b">Mes commandes</a>
					<a href="history.php" class="ui-btn ui-corner-all ui-shadow" data-icon="search" data-transition="slide" data-theme="a">Historique</a>
                    -->
                </div>
                <div class="cleaner"></div>
                <a href="#secureDialogCmd" data-rel="popup" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-alert">Bouton d&rsquo;urgence</a>
                <div data-role="popup" data-theme="a" id="secureDialogCmd" data-dismissible="false" data-overlay-theme="b">
                    <div data-theme="a" data-role="header">
                        <h1>
                            Confirmation
                        </h1>
                    </div>
                    <div class="ui-content" role="main">
                        <h1>Lancer l&rsquo;appel d&rsquo;urgence ?</h1>
                        <input type="button" data-theme="b" data-icon="check" onClick="getLocationOnce()" value="CONFIRMER"/>
                        <a href="#home" data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete" data-transition="slideUp">ANNULER</a>
                        <div id="secureResults"></div>
                    </div>
                </div>        
                <div id="player_cmd">
                    <audio id="play_cmd" loop="loop" preload="auto" style="display:none" >
                        <source src="http://www.taxibleuservices.com/client/sounds/ring.mp3" type="audio/mpeg" />
                        Your browser does not support the audio element.
                    </audio>
                </div>
                <div id="results"></div>
            </div>
            <div data-theme="a" data-role="footer" id="footer_cont3" data-position="fixed">
            	<div class="ui-bar-b ui-corner-all ui-shadow" style="width:96%;height:19px;"><marquee><b>Mise &agrave; jour des information DCVP en cours.</b></marquee></div>
<p class="copyright" style="font-size:xx-small">&copy; 2012 - </p>
            </div>
        </div>
        <div data-role="page" data-theme="a" id="planning">
            <div data-role="panel" id="planning_panel" data-position="left" data-display="reveal" data-theme="e">
                <!-- panel content goes here -->
                <ul data-role="listview" data-inset="true" data-theme="b">
                  <li><a href="#home" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-home"><b>Accueil</b></a></li>
                  <li><a href="#jobs_taker" data-transition="slide"><b>Courses directes</b></a></li>
                  <li><a href="#cmd" data-transition="slide"><b>Courses command&eacute;es</b></a></li>
                  <li><a href="#history" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bars"><b>Historique</b></a></li>
                  <li><a href="#planning" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-calendar"><b>Planning</b></a></li>
                  <li><a href="#manage" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-user"><b>Mon compte</b></a></li>
                  <li><a href="#directions_map" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-location"><b>Carte GPS</b></a></li>
                  <li><a href="#" onClick="help()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bullets"><b>Aide utilisateur</b></a></li>
                  <li><a href="#" onClick="taximedia()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-eye"><b>TaxiMedia.fr</b></a></li>
                  <li><a href="#infos" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-info"><b>Infos STM</b></a></li>
                  <li><a href="dcvpad.html" data-ajax="false" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-action"><b>Envoyer une course</b></a></li>
                </ul>
                <a href="#"  onClick="unEasy()" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-power">Mode Avanc&eacute;</a>
                <a href="#planning" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete">Fermer</a>
            </div><!-- /panel -->
            <div data-theme="a" data-role="header" data-position="fixed">
				<h1 style="width:100%; padding: 0; margin: 0;">
                    <a data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-back ui-btn-inline" data-transition="slide"><b>Retour</b></a>        
                    <a href="#planning_panel" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-home ui-btn-inline" data-transition="slide"><b>Menu</b></a>
                </h1>
            </div>
            <div class="ui-content" role="main">
                <div class="ui-bar-a ui-corner-all ui-shadow" style="padding:1em;">
                	<p class="auction"><b>Courses command&eacute;es</b></p>
                </div>
                <img src="visuels/p3.png" width="128"/>
                <div class="ui-bar-b ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="plan_cont">
                    </div>
               </div>
                <div id="results"></div>
            </div>
            <div data-theme="a" data-role="footer" id="footer_cont4" data-position="fixed">
            	<div class="ui-bar-b ui-corner-all ui-shadow" style="width:96%;height:19px;"><marquee><b>Mise &agrave; jour des information DCVP en cours.</b></marquee></div>
<p class="copyright" style="font-size:xx-small">&copy; 2012 - </p>
            </div>
        </div>
        <div data-role="page" data-theme="a" id="history">
            <div data-role="panel" id="history_panel" data-position="left" data-display="reveal" data-theme="e">
                <!-- panel content goes here -->
                <ul data-role="listview" data-inset="true" data-theme="b">
                  <li><a href="#home" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-home"><b>Accueil</b></a></li>
                  <li><a href="#jobs_taker" data-transition="slide"><b>Courses directes</b></a></li>
                  <li><a href="#cmd" data-transition="slide"><b>Courses command&eacute;es</b></a></li>
                  <li><a href="#history" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bars"><b>Historique</b></a></li>
                  <li><a href="#planning" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-calendar"><b>Planning</b></a></li>
                  <li><a href="#manage" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-user"><b>Mon compte</b></a></li>
                  <li><a href="#directions_map" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-location"><b>Carte GPS</b></a></li>
                  <li><a href="#" onClick="help()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bullets"><b>Aide utilisateur</b></a></li>
                  <li><a href="#" onClick="taximedia()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-eye"><b>TaxiMedia.fr</b></a></li>
                  <li><a href="#infos" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-info"><b>Infos STM</b></a></li>
                  <li><a href="dcvpad.html" data-ajax="false" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-action"><b>Envoyer une course</b></a></li>
                </ul>
                <a href="#"  onClick="unEasy()" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-power">Mode Avanc&eacute;</a>
                <a href="#history" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete">Fermer</a>
            </div><!-- /panel -->
            <div data-theme="a" data-role="header" data-position="fixed">
				<h1 style="width:100%; padding: 0; margin: 0;">
                    <a data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-back ui-btn-inline" data-transition="slide"><b>Retour</b></a>            
                    <a href="#history_panel" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-home ui-btn-inline" data-transition="slide"><b>Menu</b></a>
                </h1>
            </div>
            <div class="ui-content" role="main">
                <div class="ui-bar-a ui-corner-all ui-shadow" style="padding:1em;">
                	<p class="auction"><b>Historique des courses</b></p>
                </div>
                <img src="visuels/p3.png" width="128"/>
                <div class="ui-bar-b ui-corner-all ui-shadow" style="padding:1em;">
                    <div id="hist_cont">
                    </div>
                </div>
                <div id="results"></div>
            </div>
            <div data-theme="a" data-role="footer" id="footer_cont5" data-position="fixed">
            	<div class="ui-bar-b ui-corner-all ui-shadow" style="width:96%;height:19px;"><marquee><b>Mise &agrave; jour des information DCVP en cours.</b></marquee></div>
<p class="copyright" style="font-size:xx-small">&copy; 2012 - </p>
            </div>
        </div>
        <div data-role="page" data-theme="a" id="infos">
            <div data-role="panel" id="infos_panel" data-position="left" data-display="reveal" data-theme="e">
                <!-- panel content goes here -->
                <ul data-role="listview" data-inset="true" data-theme="b">
                  <li><a href="#home" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-home"><b>Accueil</b></a></li>
                  <li><a href="#jobs_taker" data-transition="slide"><b>Courses directes</b></a></li>
                  <li><a href="#cmd" data-transition="slide"><b>Courses command&eacute;es</b></a></li>
                  <li><a href="#history" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bars"><b>Historique</b></a></li>
                  <li><a href="#planning" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-calendar"><b>Planning</b></a></li>
                  <li><a href="#manage" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-user"><b>Mon compte</b></a></li>
                  <li><a href="#directions_map" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-location"><b>Carte GPS</b></a></li>
                  <li><a href="#" onClick="help()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bullets"><b>Aide utilisateur</b></a></li>
                  <li><a href="#" onClick="taximedia()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-eye"><b>TaxiMedia.fr</b></a></li>
                  <li><a href="#infos" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-info"><b>Infos STM</b></a></li>
                  <li><a href="dcvpad.html" data-ajax="false" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-action"><b>Envoyer une course</b></a></li>
                </ul>
                <a href="#"  onClick="unEasy()" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-power">Mode Avanc&eacute;</a>
                <a href="#infos" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete">Fermer</a>
            </div><!-- /panel -->
            <div data-theme="a" data-role="header" data-position="fixed">
				<h1 style="width:100%; padding: 0; margin: 0;">
                    <a data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-back ui-btn-inline" data-transition="slide"><b>Retour</b></a>            
                    <a href="#infos_panel" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-home ui-btn-inline" data-transition="slide"><b>Menu</b></a>
                </h1>
            </div>
            <div class="ui-content" role="main">
                <img src="visuels/Infos_header_stm.png" width="96%"/>
                <div id="infos_cont"></div>
            </div>
            <div data-theme="a" data-role="footer" id="footer_cont6" data-position="fixed">
            	<div class="ui-bar-b ui-corner-all ui-shadow" style="width:96%;height:19px;"><marquee><b>Mise &agrave; jour des information DCVP en cours.</b></marquee></div>
<p class="copyright" style="font-size:xx-small">&copy; 2012 - </p>
            </div>
        </div>
        <div data-role="page" data-theme="a" id="manage">
            <div data-role="panel" id="manage_panel" data-position="left" data-display="reveal" data-theme="e">
                <!-- panel content goes here -->
                <ul data-role="listview" data-inset="true" data-theme="b">
                  <li><a href="#home" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-home"><b>Accueil</b></a></li>
                  <li><a href="#jobs_taker" data-transition="slide"><b>Courses directes</b></a></li>
                  <li><a href="#cmd" data-transition="slide"><b>Courses command&eacute;es</b></a></li>
                  <li><a href="#history" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bars"><b>Historique</b></a></li>
                  <li><a href="#planning" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-calendar"><b>Planning</b></a></li>
                  <li><a href="#manage" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-user"><b>Mon compte</b></a></li>
                  <li><a href="#directions_map" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-location"><b>Carte GPS</b></a></li>
                  <li><a href="#" onClick="help()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bullets"><b>Aide utilisateur</b></a></li>
                  <li><a href="#" onClick="taximedia()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-eye"><b>TaxiMedia.fr</b></a></li>
                  <li><a href="#infos" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-info"><b>Infos STM</b></a></li>
                  <li><a href="dcvpad.html" data-ajax="false" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-action"><b>Envoyer une course</b></a></li>
                </ul>
                <a href="#"  onClick="unEasy()" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-power">Mode Avanc&eacute;</a>
                <a href="#manage" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete">Fermer</a>
            </div><!-- /panel -->
            <div data-theme="a" data-role="header" data-position="fixed">
				<h1 style="width:100%; padding: 0; margin: 0;">
                    <a data-rel="back" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-back ui-btn-inline" data-transition="slide"><b>Retour</b></a>            
                    <a href="#manage_panel" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-home ui-btn-inline" data-transition="slide"><b>Menu</b></a>
                </h1>
            </div>
            <div class="ui-content" role="main">
               <div class="ui-bar-a ui-corner-all ui-shadow" style="padding:1em; text-align: left;">
                    <div data-role="collapsible-set" data-theme="b" data-content-theme="a">
                        <div data-role="collapsible" data-collapsed="true" id="mod_collaps">
                            <h1>
                                 Modifier mon compte
                            </h1>
                            <fieldset><legend></legend>
                            <form method="POST" action="/" target="_parent" data-ajax="false" data-transition="slide" id="modmy">
                                <p>Identifiant <input type="text" name="login" id="login" size="20" maxlength="12" value=""/></p>
                                <label for="civil">
                                    Civilit&eacute; : 
                                </label>
                                <select name="civil">
                                    <option selected>Mme</option>
                                    <option>Mlle</option>
                                    <option>Mr</option>
                                </select>
                                <input type="text" id="nom" name="nom" placeholder="Nom" maxlength="60" size="20" value="">
                                <input type="text" id="prenom" name="prenom" placeholder="Pr&eacute;nom" maxlength="60" size="20" value="">
                                <input type="tel" id="taxi" name="taxi" placeholder="Num&eacute;ro de taxi" maxlength="60" size="20" value="">
                                <input type="tel" id="tel" name="tel" placeholder="T&eacute;l&eacute;phone (Sans espace SVP)" maxlength="60" size="20" value="">
                                <input type="tel" id="siret" name="siret" placeholder="N&deg; SIRET (14 chiffres sans espace SVP)" maxlength="60" size="20" value="">
                                <input type="text" id="station" name="station" placeholder="Commune de stationnement" maxlength="60" size="20" value="">
                                <select name="type" id="type">
                                    <option selected value="">Type de vehicule</option>
                                    <option>Berline</option>
                                    <option>Break 5 places</option>
                                    <option>Monospace</option>
                                </select><em></em>
                                <label for="passengers">Nombre maximum de passagers pris en charge :</label>
                                <input name="passengers" id="passengers" min="1" max="8" value="1" data-show-value="true" data-popup-enabled="true" type="range">
                                <select name="color" id="color">
                                    <option selected value="">Couleur du vehicule</option>
                                    <option>Blanc</option>
                                    <option>Gris</option>
                                    <option>Noir</option>
                                    <option>Marron</option>
                                    <option>Beige</option>
                                    <option>Jaune</option>
                                    <option>Orange</option>
                                    <option>Rouge</option>
                                    <option>Bleu</option>
                                    <option>Vert</option>
                                </select><em></em>
                                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                                    <legend>
                                        Langues parl&eacute;es
                                    </legend>
                                    <input id="checkbox1" name="en" type="checkbox">
                                    <label for="checkbox1">
                                        Anglais
                                    </label>
                                    <input id="checkbox2" name="sp" type="checkbox">
                                    <label for="checkbox2">
                                        Espagnol
                                    </label>
                                    <input id="checkbox3" name="it" type="checkbox">
                                    <label for="checkbox3">
                                        Italien
                                    </label>
                                    <input id="checkbox4" name="ru" type="checkbox">
                                    <label for="checkbox4">
                                        Russe
                                    </label>
                                    <input id="checkbox5" name="al" type="checkbox">
                                    <label for="checkbox5">
                                        Allemand
                                    </label>
                                </fieldset>
                                <!-- 
                                <div data-role="fieldcontain">
                                    <select name="lang" id="lang" multiple="multiple">
                                        <option selected value="">Langues parl&eacute;es</option>
                                        <option value="en">Anglais</option>
                                        <option value="sp">Espagnol</option>
                                        <option value="it">Italien</option>
                                        <option value="ru">Russe</option>
                                        <option value="ge">Allemand</option>
                                    </select>
                                </div>
                                -->
                                <label for="cb">
                                    Paiement CB : 
                                </label>
                                <select name="cb" id="cb" data-theme="a" data-role="flipswitch">
                                    <option value="0">
                                        Non
                                    </option>
                                    <option value="1">
                                        Oui
                                    </option>
                                </select>
                                <label for="medic">
                                    Vehicule conventionn&eacute; : 
                                </label>
                                <select name="medic" id="medic" data-theme="a" data-role="flipswitch">
                                    <option value="0">
                                        Non
                                    </option>
                                    <option value="1">
                                        Oui
                                    </option>
                                </select>
                                <label for="animal">
                                    Acceptez-vous les animaux : 
                                </label>
                                <select name="animal" id="animal" data-theme="a" data-role="flipswitch">
                                    <option value="0">
                                        Non
                                    </option>
                                    <option value="1">
                                        Oui
                                    </option>
                                </select>
                                <input type="email" name="email" id="email" placeholder="Adresse email" maxlength="60" size="20" value="">
                                <input type="email" name="confirmail" placeholder="Confirmez email SVP" maxlength="60" size="20" value="">
                                <input type="hidden" name="modmy" value="1" />
                                <input type="submit" name="submit" value="Envoyer">
                                <p><b>
                                    Dans quelques minutes votre compte sera mis &agrave; jour avec ces informations.<br>
                                    <span style="color:#F00;">Attention, si vous modifiez votre num&eacute;ro de T&eacute;l&eacute;phone, il devient votre nouvel identifiant.</span>
                                </b></p>
                            </form>
                            </fieldset>    
                    
                        </div>
                        <div data-role="collapsible" data-collapsed="true">
                            <h1>
                                 Changer de mot de passe
                            </h1>
                            <fieldset><legend></legend>
                            <form  action="/" method="post" name="id" id="change" data-ajax="false" data-transition="slide">
                                <p>Votre identifiant <input type="tel" name="login" id="log" size="20" maxlength="10"/></p>
                                <input type="hidden" name="reset" value="1" />
                                <input type="submit" value=" Envoyer "/>
                                <p><b>
                                    Vous recevrez, dans quelques minutes, votre nouveau mot de passe qui vous permettra d'acc&egrave;der &agrave; votre compte.
                                </b></p>
                            </form>
                            </fieldset>
                        </div>
                        <div data-role="collapsible" data-collapsed="true">
                            <h1>
                                 Facturation pour le mois en cours
                            </h1>
                            <div id="billing">
                            </div>
                        </div>
                        <div data-role="collapsible" data-collapsed="true">
                            <h1>
                                CGV 
                            </h1>
                            <a href="#" onClick="cgv()" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-info" data-transition="slide"><b>Consulter les CGV</b></a>
                            <a href="http://taxibleuservices.com/client/docs/CGV.pdf" target="_blank" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-action" data-transition="slide"><b>T&eacute;l&eacute;charger les CGV</b></a>
                        </div>
                    </div>
                    <input type="button" value="Scanner un QrCode" onClick="goScan()" data-icon="camera"/>
                </div>
                <div id="returns"></div>
            </div>
            <div data-theme="a" data-role="footer" id="footer_cont7" data-position="fixed">
            	<div class="ui-bar-b ui-corner-all ui-shadow" style="width:96%;height:19px;"><marquee><b>Mise &agrave; jour des information DCVP en cours.</b></marquee></div>
<p class="copyright" style="font-size:xx-small">&copy; 2012 - </p>
            </div>
        </div>
        
		<div id="directions_map" data-role="page" data-theme="e">
            <div data-role="panel" id="map_panel" data-position="left" data-display="reveal" data-theme="e">
                <!-- panel content goes here -->
                <ul data-role="listview" data-inset="true" data-theme="b">
                  <li><a href="#home" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-home"><b>Accueil</b></a></li>
                  <li><a href="#jobs_taker" data-transition="slide"><b>Courses directes</b></a></li>
                  <li><a href="#cmd" data-transition="slide"><b>Courses command&eacute;es</b></a></li>
                  <li><a href="#history" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bars"><b>Historique</b></a></li>
                  <li><a href="#planning" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-calendar"><b>Planning</b></a></li>
                  <li><a href="#manage" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-user"><b>Mon compte</b></a></li>
                  <li><a href="#directions_map" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-location"><b>Carte GPS</b></a></li>
                  <li><a href="#" onClick="help()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bullets"><b>Aide utilisateur</b></a></li>
                  <li><a href="#" onClick="taximedia()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-eye"><b>TaxiMedia.fr</b></a></li>
                  <li><a href="#infos" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-info"><b>Infos STM</b></a></li>
                  <li><a href="dcvpad.html" data-ajax="false" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-action"><b>Envoyer une course</b></a></li>
                </ul>
                <a href="#"  onClick="unEasy()" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-power">Mode Avanc&eacute;</a>
                <a href="#directions_map" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete">Fermer</a>
            </div><!-- /panel -->
			<div data-role="header">
            	<a data-rel="back" href="#home" data-transition="slide" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-back ui-btn-inline"><h1><b>Retour</b></h1></a>
                <a href="#map_panel" id="mapPanel_poper" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-home ui-btn-inline" data-transition="slide"><h1><b>Menu</b></h1></a>
			</div>
            <div class="spacer"></div><div class="spacer"></div><div class="spacer"></div>
            
			<div class="ui-content" role="main">	
				<div class="ui-bar-a ui-corner-all ui-shadow" style="padding:1.5em;">
					<p>
						<label for="from">D&eacute;part</label>
						<input id="from" data-clear-btn="true" type="text" value="Marseille, France" />
					</p>
					<p>
						<label for="to">Arriv&eacute;e</label>
						<input id="to" data-clear-btn="true" type="text" value="" />                        
					</p>
					<a id="submit" href="#" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-search">Trouver l&rsquo;itin&eacute;raire</a>
                    <div id="infos_map"></div>
					<div id="map_canvas_1" style="height:260px;"></div>
				</div>
				<div id="results_gps" class="ui-listview ui-listview-inset ui-corner-all ui-shadow" style="display:none;">
					<div class="ui-li ui-li-divider ui-btn ui-bar-b ui-corner-top ui-btn-up-undefined">Results</div>
					<div id="directions"></div>
					<div class="ui-li ui-li-divider ui-btn ui-bar-b ui-corner-bottom ui-btn-up-undefined"></div>
				</div>
                <a href="#" id="getRdv" data-rdv="Marseille, France" data-idcourse="" data-com="" data-cell="" style="display:none;"></a>
			</div>
		</div>

        <div data-role="page" data-theme="a" id="toolate">
            <div data-role="panel" id="toolate_panel" data-position="left" data-display="reveal" data-theme="e">
                <!-- panel content goes here -->
                <ul data-role="listview" data-inset="true" data-theme="b">
                  <li><a href="#home" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-home"><b>Accueil</b></a></li>
                  <li><a href="#jobs_taker" data-transition="slide"><b>Courses directes</b></a></li>
                  <li><a href="#cmd" data-transition="slide"><b>Courses command&eacute;es</b></a></li>
                  <li><a href="#history" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bars"><b>Historique</b></a></li>
                  <li><a href="#planning" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-calendar"><b>Planning</b></a></li>
                  <li><a href="#manage" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-user"><b>Mon compte</b></a></li>
                  <li><a href="#directions_map" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-location"><b>Carte GPS</b></a></li>
                  <li><a href="#" onClick="help()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-bullets"><b>Aide utilisateur</b></a></li>
                  <li><a href="#" onClick="taximedia()" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-eye"><b>TaxiMedia.fr</b></a></li>
                  <li><a href="#infos" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-info"><b>Infos STM</b></a></li>
                  <li><a href="dcvpad.html" data-ajax="false" data-transition="slide" class="ui-btn ui-btn-icon-left ui-icon-action"><b>Envoyer une course</b></a></li>
                </ul>
                <a href="#"  onClick="unEasy()" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-power">Mode Avanc&eacute;</a>
                <a href="#toolate" data-rel="close" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-delete">Fermer</a>
            </div><!-- /panel -->
            <div data-theme="a" data-role="header" data-position="fixed">
				<h1 style="width:100%; padding: 0; margin: 0;">
                    <a href="#home" class="ui-btn ui-corner-all ui-shadow ui-btn-a ui-btn-icon-left ui-icon-back ui-btn-inline" data-transition="slide"><b>Retour</b></a>            
                    <a href="#toolate_panel" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-home ui-btn-inline" data-transition="slide"><b>Accueil</b></a>
                </h1>
            </div>
            <div class="ui-content" role="main">
                <div id="late_cont" class="ui-bar-b ui-corner-all ui-shadow" style="padding:1em;">
               </div>
                <div id="results"></div>
            </div>
            <div data-theme="a" data-role="footer" id="footer_cont8" data-position="fixed">
				<div class="ui-bar-b ui-corner-all ui-shadow" style="width:96%;height:19px;"><marquee><b>Mise &agrave; jour des information DCVP en cours.</b></marquee></div>
<p class="copyright" style="font-size:xx-small">&copy; 2012 - </p>
            </div>
        </div>
        
        <div data-role="page" data-theme="a" id="urgency">
            <div data-theme="a" data-role="header" data-position="fixed">
				<h1 style="width:100%; padding: 0; margin: 0; color: #F00;">
                	URGENCE
                </h1>
            </div>
            <div class="ui-content" role="main">
                <div id="urgent" class="ui-bar-b ui-corner-all ui-shadow" style="padding:1em;">
                	<h1 style="color: #F00;">Proc&eacute;dure d&rsquo;appel d&rsquo;urgence activ&eacute;e.</h1>
                    <input type="button" data-theme="a" data-icon="check" onClick="stopSecureCall()" value="ARRETER"/>
               </div>                    
                <div id="urgencyResults"></div>
            </div>
            <div data-theme="a" data-role="footer" id="footer_cont8" data-position="fixed">
				<div class="ui-bar-b ui-corner-all ui-shadow" style="width:96%;height:19px;"><marquee><b>Proc&eacute;dure d&rsquo;appel d&rsquo;urgence activ&eacute;e.</b></marquee></div>
            </div>
        </div>
        
    </center>
	</body>
</html>